<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="google-site-verification" content="dw_1zBYRNxF7-vYNDXh3Ght_JuqgJt3BD1N_Pynqmv0" />
    <title>04 Data manipulation</title>
    <script async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-61194136-18', 'auto');
        ga('send', 'pageview');
    </script>
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css?v=3">
    <link rel="stylesheet" href="/assets/css/bootstrap-toc.min.css">
    <link rel="stylesheet" href="/assets/css/font-awesome.css">
    <link rel="stylesheet" href="/assets/css/main.scss">
    <link rel="stylesheet" href="/assets/css/VIB.css">
    <link rel="stylesheet" href="/assets/css/academicons.css">
    <link rel="stylesheet" href="/assets/css/syntax_highlighting.css">
    <link rel="shortcut icon" href="/favicon.ico " type="image/x-icon" />     
    <meta name="description" content="Introduction to R" />
    <meta property="og:title" content="VIB Bioinformatics Training: 04 Data manipulation" />
    <meta property="og:description" content="Introduction to R" />
    <meta property="og:image" content="/assets/images/bioinformatics_core_rgb_neg.png" />
</head>

<body data-spy="scroll" data-target="#toc">
    <div class="top-bar-vib">
 <a href="http://vib.be/en" target="_blank" style="font-size:14px">VIB Home </a>
</div>

<div class="container main-content">

<div class="container page-top__container">
          <div class="region region-top">
  <div id="logo" class="col-md-3 col-lg-3 text-left" style="padding-left:0px;margin-top:20px">
       <a href="/">
           <img src="/assets/images/logo.svg" height="60" alt="VIB logo" class="margin20">
       </a>
    </div>
    <div class="col-md-9 col-lg-9 text-right" style="margin-top:50px;">
    <nav role="navigation" aria-labelledby="block-mainnavigation-menu" id="block-mainnavigation" class="block block-menu navigation menu--main">
  


        <a href="/" class="topmenu">Home</a>


        <a href="/about.html" class="topmenu" >About</a>


        <a href="/hall-of-fame.html" class="topmenu">Contribute</a>


        <a href="/faq.html" class="topmenu">Faq</a>


        <a href="/search/index.html" class="topmenu">Search</a>


  </nav>

    </div>
  </div>
</div>














    <script type="application/ld+json">
        


{
  "@context": "http://schema.org",
  "@type": "Course",
  "accessMode": [
    "textual",
    "visual"
  ],
  "accessModeSufficient": [
    "textual",
    "visual"
  ],
  "accessibilityControl": [
    "fullKeyboardControl",
    "fullMouseControl"
  ],
  "accessibilityFeature": [
    "alternativeText",
    "tableOfContents"
  ],
  "accessibilitySummary": "Short descriptions are present but long descriptions will be needed for non-visual users",
  "audience": {
    "@type": "EducationalAudience",
    "educationalRole": "students"
  },
  "copyrightHolder": {
    "@type": "Organization",
    "email": "bits@vib.be",
    "name": "VIB Bioinformatics Core",
    "url": "https://www.bits.vib.be"
  },
  "headline": "04 Data manipulation",
  "inLanguage": {
    "@type": "Language",
    "name": "English",
    "alternateName": "en"
  },
  "interactivityType": "mixed",
  "isAccessibleForFree": true,
  "license": "/blob//LICENSE.md",
  "producer": {
    "@type": "Organization",
    "email": "bits@vib.be",
    "name": "VIB Bioinformatics Core",
    "url": "https://www.bits.vib.be"
  },
  "provider": {
    "@type": "Organization",
    "email": "bits@vib.be",
    "name": "VIB Bioinformatics Core",
    "url": "https://www.bits.vib.be"
  },
  "sourceOrganization": {
    "@type": "Organization",
    "email": "bits@vib.be",
    "name": "VIB Bioinformatics Core",
    "url": "https://www.bits.vib.be"
  },
  "courseCode": "R / Functions / hands-on",
  "learningResourceType": "hands-on tutorial",
  "name": "Hands-on for '04 Data manipulation' tutorial",
  "isPartOf": {
    "@type": "Course",
    "name": "04 Data manipulation",
    "description": "04 Data manipulation",
    "learningResourceType": "tutorial",
    "interactivityType": "expositive",
    "provider": {
      "@type": "Organization",
      "email": "bits@vib.be",
      "name": "VIB Bioinformatics Core",
      "url": "https://www.bits.vib.be"
    }
  },
  "url": "https://material.bits.vib.be//topics/R/tutorials/Functions/tutorial.html",
  "timeRequired": "PT45M",
  "description": "04 Data manipulation\\nThe questions this  addresses are:\n - How to manipulate variables?\n\n\\nThe objectives are:\n - get an overview of general functions to manipulate variables\n - get an overview of functions helpful for working on large data sets\n - get an overview of functions to find indices of specific elements\n - learn how to identify and convert data types\n\n",
  "hasPart": [

  ],
  "mentions": [

  ],
  "author": [
    {
      "@type": "Person",
      "name": "Janick Mathys"
    }
  ],
  "contributor": [
    {
      "@type": "Person",
      "name": "Janick Mathys"
    }
  ],
  "about": [
    {
      "@type": "CreativeWork",
      "name": "Introduction to R",
      "description": "Introduction to R",
      "url": "https://material.bits.vib.be//topics/R/"
    }
  ]
}
    </script>

    <div class="row tutorial">
      <div class="col-md-12" role="main">
        <h1 data-toc-skip>04 Data manipulation</h1>
        <div class="contributors-line">By: 

<a href="/hall-of-fame#janick-bits" class="contributor-badge">Janick Mathys</a>


</div>
        <blockquote class="overview">

            <strong><i class="fa fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Questions</strong>
            <ul>
            
            <li>How to manipulate variables?</li>
            
            </ul>

            <strong><i class="fa fa-bullseye" aria-hidden="true"></i><span class="visually-hidden">objectives</span> Objectives</strong>
            <ul>
            
            <li>get an overview of general functions to manipulate variables</li>
            
            <li>get an overview of functions helpful for working on large data sets</li>
            
            <li>get an overview of functions to find indices of specific elements</li>
            
            <li>learn how to identify and convert data types</li>
            
            </ul>

            

            
            <p><strong><i class="fa fa-hourglass-end" aria-hidden="true"></i><span class="visually-hidden">time</span> Time estimation:</strong> 45 minutes</p>
            

            


            

        </blockquote>

        <div class="container" data-field="body">
            <div class="row">
                <div class="col-md-10" role="main">
                    <h1 class="no_toc" id="manipulation-of-variables">Manipulation of variables</h1>

<h3 id="general-functions">General functions</h3>
<p>The big difference between R and other programming languages is that functions in R are designed to be applied to variables rather than to individual values to avoid loops e.g. if we want to log transform a whole dataset we can do this using a single operation:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; v &lt;- c(1,10,100,1000,10000)
&gt; log10(v)
[1] 0 1 2 3 4
</code></pre></div></div>
<p>The log10() function is written in such a way that it can be applied on a vector. This is true for all functions and operators in R:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; v - 1
[1] 0     9    99   999  9999
</code></pre></div></div>
<p>R has built-in functions for virtually any standard mathematical task.</p>

<figure id="figure-1"><img src="../../images/Rgeneral_functions.png" alt="general_functions" /><figcaption><span class="figcaption-prefix">Figure 1:</span> Overview of built-in functions</figcaption></figure>

<p>Arithmetic operators can be used on variables. Provided that the variables have the same dimensions, you can do element-wise addition, subtraction, multiplication and division of two vectors or tables. Element-wise means that the calculation is performed on the equivalent positions between the two variables: first element + first element, second element + second element etc.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; v1&lt;-c(1,2,3)
&gt; v2&lt;-c(4,5,6)
&gt; z&lt;-v1+v2
&gt; z
[1] 5 7 9
</code></pre></div></div>

<p>If you perform operations on vectors with different lengths (not recommended) then the vector with the shorter length is recycled to the length of the longer vector so that the first element of the shorter vector is appended to the end of that vector (a way of faking that it is of equal length to the longer vector) and so forth. You will get a warning, but R does let you perform the operation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; x1 &lt;- c(1,2,3)
&gt; x2 &lt;- c(3,4)
&gt; x3 &lt;- x1 + x2
Warning message: 
In x1 + x2:
  longer object length is not aa multiple of shorter object length
&gt; x3
[1] 4 6 6
</code></pre></div></div>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-demo"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Demo</h3>

  <p>From the demo script run the <strong>Operations on variables</strong> section</p>
</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-exercise-13a"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Exercise 13a</h3>

  <ol>
    <li>Calculate log base2 of the activity in Drug_study</li>
    <li>Round the result to the nearest integer
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>
          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> log.act &lt;- (log2(Drug_study$activity))
 round(log.act)
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-extra-exercise-13b"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Extra exercise 13b</h3>

  <ol>
    <li>Create vector v as the sum of newVector and threes using an arithmetic operator</li>
    <li>Print the content of v</li>
    <li>Do the same for newVector and vector x2 with elements 3,1</li>
    <li>Join the elements of newVector and threes into 1 vector q
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>
          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> v &lt;- newVector + threes
 v
 x2 &lt;- c(3,1)
 newVector + x2 
  q &lt;- c(newVector,threes)
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-exercise-13c"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Exercise 13c</h3>

  <ol>
    <li>Add a column called geneDensity to genomeSize containing the number of bp per gene for every organism</li>
    <li>Round the numbers to the nearest integer
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> dens.fl &lt;- genomeSize$size / genomeSize$geneCount
 genomeSize$geneDensity &lt;- round(dens.fl)
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<p>Some functions only work on vectors. For instance sort() will sort data from smallest to largest (arguments allow other ordering) and order() returns the indices of the sorted elements:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x
[1] 1 3 11 1 7
sort(x)
[1] 1 1 3 7 11
order(x)
[1] 1 4 2 5 3
</code></pre></div></div>
<p>In the sorted vector the first element is also the first element of the original vector, the second element of the sorted vector has index 4 in the original vector etc.
To sort a data frame use order() inside square brackets:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mtcars[order(mtcars$mpg),]
</code></pre></div></div>
<p>To sort on two columns (first on mpg, then on cyl):</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mtcars[order(mtcars$mpg,mtcars$wt),]
</code></pre></div></div>
<p>To sort in descending order place a minus sign in front of the variable:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mtcars[order(mtcars$mpg,-mtcars$wt),]
</code></pre></div></div>

<p>Select the <strong>labels</strong> of a vector or table using names(). For tables rownames() and colnames() can access or set the either row or the column labels. Both functions will not work on vectors.</p>

<p>The length() function retrieves the number of elements of a vector. Used on data frames it doesn’t throw an error but returns the number of columns instead.</p>

<p>The same is true for match(x,y). It compares x and y and returns a vector with the same length as x containing:</p>
<ul>
  <li>NA for elements of x that are not in y</li>
  <li>the index in y for elements in x that are in y</li>
</ul>

<p>On data frames it will not do an element-wise comparison but a column-wise comparison:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>match(D1,D2) 
</code></pre></div></div>
<p>will return a vector with length equal to the number of columns in D1 containing:</p>
<ul>
  <li>NA for columns of D1 that are not in D2</li>
  <li>the index in D2 for columns in D1 that are in D2 (so the complete column has to match, not the individual elements)</li>
</ul>

<p>Important is to see the difference between the + operator and sum(). The former works element-wise on two variables, the latter calculates the sum of all elements of one vector.</p>

<p>There are also functions to be used only on tables, e.g.</p>
<ul>
  <li>dim() returns how many rows and columns a table has, nrow() and ncol() will get these values individually</li>
  <li>t() transposes matrices (exchanges rows and columns), the output is a transposed matrix: the columns are the rows of the original matrix and vice versa</li>
</ul>

<p>Use merge() to join two data frames. Let?s say D1 has a column A with values. Data frame D2 has the same values stored in column A. Merge the two data frames on the basis of this common column:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>newD &lt;- merge(D1,D2)
</code></pre></div></div>
<p>If (some of) the values of the common column differ, merge() will ignore these values. Use argument <em>all.x</em> to add an extra row for every different value to the resulting data frame. All rows where the values of the two data frames don?t correspond, will be filled up with NA values.</p>

<p>Most functions operate on numbers but there are also functions for manipulating text, e.g.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>paste(x,y,sep=" ") 
</code></pre></div></div>
<p>concatenates two strings x and y (glues them together into one string) separating them by the character defined by <em>sep</em>. Arguments <em>x</em> and <em>y</em> can be strings but they can also be vectors. If they are vectors, they are concatenated element-wise to give a character vector result.</p>

<p>Furthermore there are also functions specific for factors. For instance to select the names of the categories (levels) of a factor use levels() and table() to create a contingency table.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> table(cell_phone_data$own, cell_phone_data$grade)
</code></pre></div></div>

<figure id="figure-2"><img src="../../images/Rtable_function.png" alt="table_function" /><figcaption><span class="figcaption-prefix">Figure 2:</span> Example of a contingency table</figcaption></figure>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-exercise-13d"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Exercise 13d</h3>

  <p>You repeat the plant study experiment this time having the following numbers of plants developing lesions: 1, 6, 6, 5, 4</p>
  <ol>
    <li>Add these data as a third column to the data frame</li>
    <li>Relabel columns to Day, Infected and Repeat</li>
    <li>Use paste() to add the word ?day? to the elements of the Day column. Look at the documentation first !
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Plant_study$repeated &lt;- c(1,6,6,5,4)
 names(Plant_study) &lt;- c("Day","Infected","Repeat")
 ?paste
 Plant_study$Day &lt;- paste(Plant_study$Day,"day",sep="")
</code></pre></div>          </div>
        </details>
      </blockquote>

      <blockquote class="question">
        <h3 id="question-question"><i class="fa fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Question</h3>

        <p>What will happen when you run this code ?</p>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> paste(Plant_study[,"Day"],"day",sep="")
</code></pre></div>        </div>
      </blockquote>
    </li>
  </ol>
</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-exercise-13e"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Exercise 13e</h3>

  <ol>
    <li>Change the label of the second column of Drug_study to drug</li>
    <li>How many rows does Drug_study contain?</li>
    <li>Order the rows according to decreasing activity
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> colnames(Drug_study)[2] &lt;- "drug"
 nrow(Drug_study)
 Drug_study[order(Drug_study$activity,decreasing=TRUE),]
</code></pre></div>          </div>
        </details>
      </blockquote>

      <blockquote class="question">
        <h3 id="question-question-1"><i class="fa fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Question</h3>

        <p>What happens when you run this code ?</p>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> colnames(Drug_study$ID) &lt;- "id"
</code></pre></div>        </div>
      </blockquote>
      <blockquote class="question">
        <h3 id="question-question-2"><i class="fa fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Question</h3>

        <p>What happens when you run this code ?</p>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> colnames(Drug_study[2]) &lt;- "blabla"
</code></pre></div>        </div>
      </blockquote>
      <blockquote class="question">
        <h3 id="question-question-3"><i class="fa fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Question</h3>

        <p>What will happen when you run this code ?</p>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Drug_study[order(Drug_study$activity),"ID"]
</code></pre></div>        </div>
      </blockquote>
      <blockquote class="question">
        <h3 id="question-question-4"><i class="fa fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Question</h3>

        <p>What will happen when you run this code ?</p>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> n &lt;- order(Drug_study$activity,decreasing=TRUE)
 Drug_study[n,]
</code></pre></div>        </div>
      </blockquote>
    </li>
  </ol>
</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-extra-exercise-13f"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Extra exercise 13f</h3>

  <ol>
    <li>Sort the elements of z from smallest to largest</li>
    <li>Now use order(z). What’s the difference with the previous exercise?</li>
    <li>How many elements does z contain?
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> sort(z)
 order(z)
 length(z) 
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-extra-exercise-13g"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Extra exercise 13g</h3>

  <p>Add a new row to data frame ab containing values: 3,4,7</p>
  <blockquote>
    <details>
      <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> d &lt;- c(3,4,7)
 ab &lt;- rbind(ab,d)
</code></pre></div>      </div>
    </details>
  </blockquote>

</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-extra-exercise-13h"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Extra exercise 13h</h3>

  <ol>
    <li>How many rows and columns are in the built-in data frame CO2 (data on CO2 uptake by plants)</li>
    <li>Use levels() to retrieve the names of the Treatment categories</li>
    <li>Create a contingency table with counts (number of plants) in every category of CO2 that is defined by Type and Treatment</li>
    <li>Use unique() to count how many plants were studied
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> dim(CO2)
 levels(CO2$Treatment)
 table(CO2$Type,CO2$Treatment)
 length(unique(CO2$Plant))
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<h3 id="functions-helpful-for-working-with-large-data-sets">Functions helpful for working with large data sets</h3>
<p>Research in biology/medicine often generates very large data sets. When you work with very large data sets, it is often useful to show only a small part of the data set;</p>
<ul>
  <li>head() shows the first 6 elements (vector) or rows (table) of a variable</li>
  <li>tail() prints the last 6 elements or rows</li>
</ul>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-exercise-14a"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Exercise 14a</h3>

  <ol>
    <li>View the first 6 rows of the mtcars data frame</li>
    <li>Return TRUE if mtcars contains cars with 6 gears and FALSE if not</li>
    <li>How many cars with 3 gears are in mtcars?
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>
          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> head(mtcars)
 nrow(subset(mtcars,gear==6))!=0
 nrow(subset(mtcars,gear==3))
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<h3 id="functions-for-finding-indices-of-specific-elements">Functions for finding indices of specific elements</h3>
<p>There are functions that help you locate specific values, the which functions:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>which.min(x)
which.max(x)
</code></pre></div></div>
<p>return the location (index) of the minimum, maximum or a specific value of a vector x. So max() will return the highest value in the data, which.max() will return the index of the highest value in the data.</p>

<p>The argument of which() is a logical expression and which() will return the indices of the elements for which the logical expression is TRUE.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x &lt;- c(1,5,8,4,6)
x
# [1] 1 5 8 4 6
which(x == 5)
# [1] 2
which(x != 5)
# [1] 1 3 4 5
</code></pre></div></div>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-exercise-15a"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Exercise 15a</h3>

  <p>Get the data of the patient with the highest activity in Drug_study</p>
  <blockquote>
    <details>
      <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Drug_study[which.max(Drug_study$activity),]
 
</code></pre></div>      </div>
    </details>
  </blockquote>

  <blockquote class="question">
    <h3 class="question" id="question-question-5"><i class="fa fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Question</h3>

    <p>What will happen when you run this code ?</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> n &lt;- which.max(Drug_study$activity)
 Drug_study[n,]
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-exercise-15b"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Exercise 15b</h3>

  <ol>
    <li>Get the index of the column called cyl in mtcars</li>
    <li>Create a data frame that contains the car with the lowest mpg for each category of cyl
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> which(names(mtcars)=="cyl")
 C4m &lt;- mtcars[order(mtcars$cyl,mtcars$mpg),][1,]
 C6 &lt;- subset(mtcars,cyl==6)
 C6m &lt;- C6[which.min(C6$mpg),]
 C8m &lt;- mtcars[order(-mtcars$cyl,mtcars$mpg),][1,]
 rbind(C4m,C6m,C8m)
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<h3 id="checking-and-converting-types-of-variables">Checking and converting types of variables</h3>
<p>To check the data structure of an object you can use str() and the generic class() function:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class(c(10,12,30))
# [1] "numeric"
class(c("alana","britt","chris"))
# [1] "character"
class(c(TRUE,TRUE,FALSE))
# [1] "logical"
</code></pre></div></div>

<p>You can also use the specific is. functions e.g. is.numeric(), is.character(), is.Date(), is.vector(), is.matrix(), is.data.frame() etc.</p>

<p>The is.na(x) function returns TRUE when an element of x is missing:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x &lt;- c(1,2,3,NA)
is.na(x)
# [1] FALSE FALSE FALSE TRUE
</code></pre></div></div>
<p>To recode values to missing values you don?t need is.na(). Select the rows that contain the value you want to recode, e.g. 99, and change the value using an assignment:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data$v1[data$v1==99] &lt;- NA
</code></pre></div></div>
<p>To exclude missing values you can use is.na() but there are alternatives. The problem with missing values is that when you apply arithmetic functions on variables that contain missing values they will return missing values and you will have no result. To circumvent this problem many functions have the <em>na.rm</em> argument. If you set <em>na.rm=TRUE</em> missing values are deleted before calculations are done.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mean(x) 			
# NA
mean(x,na.rm=TRUE) 	
# 2
</code></pre></div></div>
<p>The function na.omit() allows to create a new vector without missing values. If you apply this function on a data frame it will remove complete rows that contain one or more NA-values.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>newdata &lt;- na.omit(x)
</code></pre></div></div>
<p>You can convert the data type of an object by using the as. functions e.g. as.numeric(), as.character(), as.Date(), as.vector(), as.matrix(),
as.data.frame() etc.</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-demo-1"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Demo</h3>

  <p>From the demo script run the <strong>Checking and converting data types</strong> section</p>
</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-exercise-16a"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Exercise 16a</h3>

  <p>We created a vector containing the days of the week and loaded this into a data frame called Plant_study. If we want to replace the days of the week by real dates, how should we proceed?</p>

  <p>To create a Date object in R:</p>
  <ul>
    <li>define the date as a string in the following format: 1970-01-01</li>
    <li>transform the string into a date by using as.Date()
      <ol>
        <li>Replace the days of the week by the dates of this week</li>
        <li>What type of data is Plant_study ?</li>
        <li>Convert Plant_study into a matrix called PS</li>
        <li>Did the conversion work? Look at the matrix to see if there is a problem.
          <blockquote>
            <details>
              <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

              <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Plant_study$Days &lt;- as.Date(c("2019-01-09","2019-01-10","2019-01-11","2019-01-12","2019-01-13"))
 class(Plant_study)
 PS &lt;- as.matrix(Plant_study)
 PS
</code></pre></div>              </div>
            </details>
          </blockquote>
        </li>
      </ol>
    </li>
  </ul>

</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-extra-exercise-16b"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Extra exercise 16b</h3>

  <ol>
    <li>Check the data type of the second column of Drug_study. Retrieve the column using a comma.</li>
    <li>Convert the second column into a vector.</li>
    <li>What is different now? Look at the vector.
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> class(Drug_study[,2])
 v &lt;- as.vector(Drug_study[,2])
 v
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-exercise-16c"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Exercise 16c</h3>

  <p>Instead of deleting missing values with na.omit() you can select the non-missing values.</p>
  <ol>
    <li>Create a vector with a missing value</li>
    <li>Multiply all elements with 2. What happens?</li>
    <li>Check if the 2nd element is missing</li>
    <li>Delete the missing value using is.na() and the strategy above
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> x &lt;- c(1,2,3,NA)
 x*2
 is.na(x[2])
 x[!is.na(x)]
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-extra-exercise-16d"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Extra exercise 16d</h3>

  <ol>
    <li>Check if z is a vector or a data frame</li>
    <li>Check if z contains numbers or characters</li>
    <li>Convert z into a matrix</li>
    <li>Convert the elements of z into characters
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> is.vector(z)
 is.data.frame(z) 
 is.character(z)
 is.numeric(z)
 as.matrix(z) 
 as.character(z)
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-extra-exercise-16e"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Extra exercise 16e</h3>

  <ol>
    <li>Create a vector called words containing Hello, Hi</li>
    <li>Convert the words into numbers. What happens?
      <blockquote>
        <details>
          <summary><i class="fa fa-eye" aria-hidden="true"></i><span class="visually-hidden">solution</span> Solution
</summary>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> words &lt;- c("Hello","Hi")
 as.numeric(words) 
</code></pre></div>          </div>
        </details>
      </blockquote>
    </li>
  </ol>

</blockquote>

<p>R is smart enough to catch you if you try to do an illogical conversion, such as convert characters to numbers. It does the conversion but the data is converted to NA values.</p>



                    
                    <blockquote class="key_points">
                        <h3><i class="fa fa-key" aria-hidden="true"></i><span class="visually-hidden">keypoints</span> Key points</h3>

                        <ul>
                            
                            <li>We showed an overview of functions for manipulating variables</li>
                            
                            <li>We showed how to check and convert data types</li>
                            
                        </ul>
                    </blockquote>
                    

                    

                    

                </div>
                <!-- sidebar, which will be hidden on a small screen -->
                <nav class="col-md-2 sticky-toc bs-docs-sidebar hidden-print hidden-xs hidden-sm" role="complementary" id="toc" data-toggle="toc"></nav>
            </div>
        </div>

        <h3><i class="fa fa-thumbs-up" aria-hidden="true"></i><span class="visually-hidden">congratulations</span> Congratulations on successfully completing this tutorial!</h3>

        

        

</div>
</div>
</div>
<footer>
   <div class="well row">
       <div class="col-md-2 text-center" style="padding: 25px 20px 25px 20px;">				
         <a href="https://www.bits.vib.be" target="_blank"><img src="/assets/images/bioinformatics_core_rgb_neg.png" width="200"></a>
       </div>
       <div class="col-md-8 text-center" style="padding-top: 20px;">	
        <a href="https://github.com/vibbits/training-material" title="View on GitHub" class="margin20" target="_blank">
                            <i class="fa fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> View on GitHub
                        </a>
       </div>
       <div class="col-md-2 text-center" style="padding-top: 30px;">
         <span class="slogan"><br>SCIENCE MEETS LIFE</span>
       </div>
   </div>
</footer>


</body>
<script type="text/javascript" src="/assets/js/jquery.slim.min.js"></script>
<script type="text/javascript" src="/assets/js/popper.min.js"></script>
<script type="text/javascript" src="/assets/js/bootstrap.min.js?v=3"></script>
<script type="text/javascript" src="/assets/js/details-element-polyfill.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/javascript" src="/assets/js/bootstrap-toc.min.js"></script>
<script type="text/javascript" src="/assets/js/main.js"></script>
<script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
<script type="text/javascript">
    var snippets = document.querySelectorAll('div.highlight');
    [].forEach.call(snippets, function(snippet) {
        snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn btn-light" data-clipboard-snippet><i class="fa fa-copy"></i>&nbsp;Copy</button>');
    });

    var clipboardSnippets = new ClipboardJS('[data-clipboard-snippet]', {
        target: function(trigger) {
            return trigger.nextElementSibling;
        }
    });
</script>

</html>
